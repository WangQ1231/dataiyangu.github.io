<!-- build time:Sat Apr 06 2019 08:14:30 GMT+0800 (China Standard Time) --><!DOCTYPE html><script src="/js/src/pjax/jquery_min_js.js"></script><script src="/js/src/pjax/jquery_pjax_min_js.js"></script><script src="/js/src/pjax/pjaxMain.js"></script><html class="theme-next muse use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-flash.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4"><link rel="mask-icon" href="/images/favicon.ico?v=5.1.4" color="#222"><link rel="manifest" href="/images/favicon.ico"><meta name="msapplication-config" content="/images/favicon.ico"><meta name="keywords" content="JVM,"><link rel="alternate" href="/atom.xml" title="Leesin's Blog" type="application/atom+xml"><meta name="description" content="语言无关性.class文件能够在JVM上运行，上图可以看出许多语言rb、groovy等都能编译成.class文件，所以java和JVM是相对独立的两部分。同样能得出结论：class文件是JVM的基石文件结构类型名称数量描述u4magic1魔数，也叫magic number，数字表示是否是一个java文件u2minor_version1小版本u2major_version1大版本u2constant"><meta name="keywords" content="JVM"><meta property="og:type" content="article"><meta property="og:title" content="JVM内核-原理、诊断与优化学习笔记（十）：Class文件结构"><meta property="og:url" content="http://mmmmmm.me/2019-03-04-1.html"><meta property="og:site_name" content="Leesin&#39;s Blog"><meta property="og:description" content="语言无关性.class文件能够在JVM上运行，上图可以看出许多语言rb、groovy等都能编译成.class文件，所以java和JVM是相对独立的两部分。同样能得出结论：class文件是JVM的基石文件结构类型名称数量描述u4magic1魔数，也叫magic number，数字表示是否是一个java文件u2minor_version1小版本u2major_version1大版本u2constant"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2019-03-12T12:14:09.313Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="JVM内核-原理、诊断与优化学习笔记（十）：Class文件结构"><meta name="twitter:description" content="语言无关性.class文件能够在JVM上运行，上图可以看出许多语言rb、groovy等都能编译成.class文件，所以java和JVM是相对独立的两部分。同样能得出结论：class文件是JVM的基石文件结构类型名称数量描述u4magic1魔数，也叫magic number，数字表示是否是一个java文件u2minor_version1小版本u2major_version1大版本u2constant"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.4",sidebar:{position:"left",display:"hide",offset:12,b2t:!1,scrollpercent:!1,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"P88H67GUII",apiKey:"5489ac7ce78f59f4a8cb5445035f54d8",indexName:"dataiyangu",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://mmmmmm.me/2019-03-04-1.html"><title>JVM内核-原理、诊断与优化学习笔记（十）：Class文件结构 | Leesin's Blog</title></head><body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans"><link rel="stylesheet" href="/dist/APlayer.min.css"><div class="hover_sidebar"></div><header id="header_left" class="header_left" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header_left_inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu_left" class="menu_left"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-top"><a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i><br>热度</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="menu-item-icon fa fa-fw fa-heart"></i><br>留言</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="algolia-popup popup search-popup"><div class="algolia-search"><div class="algolia-search-input-icon"><i class="fa fa-search"></i></div><div class="algolia-search-input" id="algolia-search-input"></div></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div id="algolia-pagination" class="algolia-pagination"></div></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div></div></nav></div><div class="header_sidebar">黑匣子</div></header><div class="eye"><div class="eye1"><ul><li style="background-color:#C7EDCC">豆沙绿</li><li style="background-color:#FAF9DE">杏仁黄</li><li style="background-color:#FFF">银河白</li><li style="background-color:#323232">极光黑</li><li style="background-color:#FFF2E2">秋叶褐</li><li style="background-color:#FDE6E0">胭脂红</li><li style="background-color:#E3EDCD">青草绿</li><li style="background-color:#DCE2F1">海天蓝</li><li style="background-color:#E9EBFE">葛巾紫</li><li style="background-color:#EAEAEF">极光灰</li><li style="background-color:#cce8cf">qq管家</li></ul></div><div class="eye2">满天星</div></div><div id="aplayer"></div><script type="text/javascript" src="/dist/APlayer.min.js"></script><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><a href="https://github.com/dataiyangu?tab=repositories"><img style="position:absolute;top:0;left:0;border:0" alt="Fork me on GitHub" data-original="/images/github_fork.png"></a><div class="bg_content"><canvas id="canvas"></canvas></div><header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Leesin's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">To be a better me</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-top"><a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i><br>热度</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="menu-item-icon fa fa-fw fa-heart"></i><br>留言</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="algolia-popup popup search-popup"><div class="algolia-search"><div class="algolia-search-input-icon"><i class="fa fa-search"></i></div><div class="algolia-search-input" id="algolia-search-input"></div></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div id="algolia-pagination" class="algolia-pagination"></div></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div></div></nav></div></header><div id="pjax-container"><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article data-scroll-reveal="enter bottom move 80px over 1s after 0.0s" class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://mmmmmm.me/2019-03-04-1.html"><span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Leesin.Dong"><meta itemprop="description" content=""><meta itemprop="image" content="/images/header.jpg"></span><span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Leesin's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">JVM内核-原理、诊断与优化学习笔记（十）：Class文件结构</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-04T10:21:02+08:00">2019-03-04 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span> </a></span>， <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/JVM内核-原理、诊断与优化学习笔记/" itemprop="url" rel="index"><span itemprop="name">JVM内核-原理、诊断与优化学习笔记</span> </a></span></span><span id="/2019-03-04-1.html" class="leancloud_visitors" data-flag-title="JVM内核-原理、诊断与优化学习笔记（十）：Class文件结构"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数&#58;</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-divider">|</span> <span class="page-pv"><i class="fa fa-file-o"></i>Read the number <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>times</span><div class="post-wordcount"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">2.6k字 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">10分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="语言无关性"><a href="#语言无关性" class="headerlink" title="语言无关性"></a>语言无关性</h1><p><img alt="在这里插入图片描述" data-original="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70-20190304160708704.png"><br>.class文件能够在JVM上运行，上图可以看出许多语言rb、groovy等都能编译成.class文件，所以java和JVM是相对独立的两部分。<br>同样能得出结论：class文件是JVM的基石</p><h1 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h1><table><thead><tr><th>类型</th><th>名称</th><th>数量</th><th>描述</th></tr></thead><tbody><tr><td>u4</td><td>magic</td><td>1</td><td>魔数，也叫magic number，数字表示是否是一个java文件</td></tr><tr><td>u2</td><td>minor_version</td><td>1</td><td>小版本</td></tr><tr><td>u2</td><td>major_version</td><td>1</td><td>大版本</td></tr><tr><td>u2</td><td>constant_pool_count</td><td>1</td><td>常量池数量的属性</td></tr><tr><td>cp_info</td><td>constant_pool</td><td>constant_pool_count - 1</td><td>常量池的内容，就是常量池的个数减一</td></tr><tr><td>u2</td><td>access_flags</td><td>1</td><td>访问修饰符 public private等</td></tr><tr><td>u2</td><td>this_class</td><td>1</td><td>当前类</td></tr><tr><td>u2</td><td>super_class</td><td>1</td><td>超类，单继承</td></tr><tr><td>u2</td><td>interfaces_count</td><td>1</td><td>接口数量的属性</td></tr><tr><td>u2</td><td>interfaces</td><td>interfaces_count</td><td>接口</td></tr><tr><td>u2</td><td>fields_count</td><td>1</td><td>字段数量的属性</td></tr><tr><td>field_info</td><td>fields</td><td>fields_count</td><td>字段</td></tr><tr><td>u2</td><td>methods_count</td><td>1</td><td>方法数量的属性</td></tr><tr><td>method_info</td><td>methods</td><td>methods_count</td><td>方法的信息</td></tr><tr><td>u2</td><td>attribute_count</td><td>1</td><td>属性数量的属性</td></tr><tr><td>attribute_info</td><td>attributes</td><td>attributes_count</td><td>属性的信息</td></tr></tbody></table><p>u1 u2 u3 u4表示无符号的整数，u1表示1个byte的整数，u2表示2个byte的整数，数字表示整数的长度。</p><h2 id="魔数"><a href="#魔数" class="headerlink" title="魔数"></a>魔数</h2><p>magic u4</p><ul><li><p>0xCAFEBABE</p><p>4个byte的一个数字，用来表示当前文件是一个class文件</p></li></ul><h2 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h2><p>minor_version u2<br>major_version u2<br>当进行编译的时候用什么版本的javac编译出来的class文件<br>-target目标版本是多少</p><p>JDK 编译器版本| target 参数 |六进制 minor.major |十进制major.minor<br>|–|–|–|–|<br>jdk1.1.8| 不能带 target 参数 |00 03 00 2D |45.3<br>jdk1.2.2| 不带(默认为 -target 1.1) | 00 03 00 2D |45.3<br>jdk1.2.2| -target 1.2 | 00 00 00 2E | 46.0<br>jdk1.3.1_19| 不带(默认为 -target 1.1) | 00 03 00 2D | 45.3<br>jdk1.3.1_19| -target 1.3 | 00 00 00 2F | 47.0<br>j2sdk1.4.2_| 不带(默认为 -target 1.2) | 00 00 00 2E |46.0<br>j2sdk1.4.2_| -target 1.4 | 00 00 00 30 | 48.0<br>jdk1.5.0_11| 不带(默认为 -target 1.5) | 00 00 00 31 | 49.0<br>jdk1.5.0_11| -target 1.4 -source 1.4| 00 00 00 30| 48.0<br>jdk1.6.0_01| 不带(默认为 -target 1.6) | 00 00 00 32 | 50.0<br>jdk1.6.0_01| -target 1.5 | 00 00 00 31| 49.0<br>jdk1.6.0_01| -target 1.4 -source 1.4| 00 00 00 30| 48.0<br>jdk1.7.0| 不带(默认为 -target 1.6) | 00 00 00 32 |50.0<br>jdk1.7.0| -target 1.7 | 00 00 00 33 | 51.0<br>jdk1.7.0| -target 1.4 -source 1.4 | 00 00 00 30 | 48.0</p><h2 id="常量池"><a href="#常量池" class="headerlink" title="常量池"></a>常量池</h2><p><strong><font color="red">基本上所有的数据都是存在这里，后面的类名方法名等都是通过索引的方式指向这里，一切数据的基石。</font></strong></p><ul><li>constant_pool_count u2</li><li><p>constant_pool cp_info</p><p>|-|-|-|<br>|–|–|–|<br>CONSTANT_Utf8 |1|UTF-8编码的Unicode字符串<br>CONSTANT_Integer |3| int类型的字面值<br>CONSTANT_Float |4|float类型的字面值<br>CONSTANT_Long |5|long类型的字面值<br>CONSTANT_Double |6|double类型的字面值<br>CONSTANT_Class |7|对一个类或接口的符号引用<br>CONSTANT_String |8|String类型字面值的引用<br>CONSTANT_Fieldref |9| 对一个字段的符号引用<br>CONSTANT_Methodref |10|对一个类中方法的符号引用<br>CONSTANT_InterfaceMethodref |11| 对一个接口中方法的符号引用<br>CONSTANT_NameAndType |12| 对一个字段或方法的部分符号引用</p><h3 id="CONSTANT-Utf8"><a href="#CONSTANT-Utf8" class="headerlink" title="CONSTANT_Utf8"></a>CONSTANT_Utf8</h3></li><li>tag 1 (常量标识符 1代表UTF-8)</li><li>length u2 （UFT-8这个字符串byte数组的长度）</li><li>bytes[length]（UTF-8的实际的内容）<br><img alt="在这里插入图片描述" data-original="../images/20190304071517995.png"><br>三个UTF-8类型的常量：先显示字符串的长度，()I 表示空参返回值是int的数，()Ljava/lang/Object表示空参返回值是Object，compareTo表示方法的名称<h3 id="CONSTANT-Integer"><a href="#CONSTANT-Integer" class="headerlink" title="CONSTANT_Integer"></a>CONSTANT_Integer</h3><ul><li>tag 3</li><li>byte u4</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">static</span> final int sid=<span class="number">99</span>;</span><br></pre></td></tr></table></figure><p><img alt="在这里插入图片描述" data-original="../images/20190304072028605.png"></p><h3 id="CONSTANT-String"><a href="#CONSTANT-String" class="headerlink" title="CONSTANT_String"></a>CONSTANT_String</h3><ul><li>tag 8</li><li>string_index u2 (指向utf8的索引)<br>内部不直接存储内容而是指向UFT-8，实际的内容保存在UTF-8中</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">static</span> final <span class="built_in">String</span> sname=<span class="string">"geym"</span>;</span><br></pre></td></tr></table></figure><p><img alt="在这里插入图片描述" data-original="https://img-blog.csdnimg.cn/20190304072138569.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70"></p><h3 id="CONSTANT-NameAndType"><a href="#CONSTANT-NameAndType" class="headerlink" title="CONSTANT_NameAndType"></a>CONSTANT_NameAndType</h3><ul><li>tag 12</li><li>name_index u2 (名字，指向utf8)</li><li>descriptor_index u2 (描述符类型，指向utf8)<br>名字和类型都是指向UTF-8描述的，本身是没有内容的</li></ul><p><img alt="在这里插入图片描述" data-original="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>上图表示了名字为init，空参，返回值为void的方法，即默认的构造函数的表示。</p><h3 id="CONSTANT-Class"><a href="#CONSTANT-Class" class="headerlink" title="CONSTANT_Class"></a>CONSTANT_Class</h3><ul><li>tag 7</li><li>name_index u2 (名字，指向utf8)</li></ul><p><img alt="在这里插入图片描述" data-original="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70-20190304160706491.png"></p><h3 id="CONSTANT-Fieldref-CONSTANT-Methodref-CONSTANT-InterfaceMethodref"><a href="#CONSTANT-Fieldref-CONSTANT-Methodref-CONSTANT-InterfaceMethodref" class="headerlink" title="CONSTANT_Fieldref ,CONSTANT_Methodref ,CONSTANT_InterfaceMethodref"></a>CONSTANT_Fieldref ,CONSTANT_Methodref ,CONSTANT_InterfaceMethodref</h3><p>字段、方法、接口方法</p><ul><li>tag 9 ,10, 11</li><li>class_index u2 (指向CONSTANT_Class)属于哪个类</li><li>name_and_type_index u2 (指向CONSTANT_NameAndType)本身的名字和类型</li></ul><p><img alt="在这里插入图片描述" data-original="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70-20190304160706283.png"><br><img alt="在这里插入图片描述" data-original="https://img-blog.csdnimg.cn/20190304073503808.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70"></p><h2 id="访问标识符"><a href="#访问标识符" class="headerlink" title="访问标识符"></a>访问标识符</h2><p>access flag u2：类的标示符<br>根据value的值做区分</p><p>Flag Name |Value |Interpretation<br>|-|-|-|<br>ACC_PUBLIC |0x0001 |public<br>ACC_FINAL |0x0010 |final,不能被继承.<br>ACC_SUPER |0x0020 |是否允许使用invokespecial指令，JDK1.2后，该值为true<br>ACC_INTERFACE |0x0200 |是否是接口<br>ACC_ABSTRACT |0x0400 |抽象类<br>ACC_SYNTHETIC |0x1000 |该类不是由用户代码生成,运行时生成的，没有源码<br>ACC_ANNOTATION |0x2000 |是否为注解<br>ACC_ENUM |0x4000 |是否是枚举</p><h2 id="类、超类、接口"><a href="#类、超类、接口" class="headerlink" title="类、超类、接口"></a>类、超类、接口</h2><ul><li>this_class u2<br>指向常量池的Class</li><li>super_class u2<br>指向常量池的Class</li><li>interface_count u2<br>接口数量</li><li>interfaces<br>interface_count 个 interface u2<br>每个interface是指向CONSTANT_Class的索引<h2 id="字段"><a href="#字段" class="headerlink" title="字段"></a>字段</h2></li><li>field_count<br>字段数量</li><li>fields<br>field_count个field_info</li><li>field<br>access_flags u2<br>name_index u2<br>descriptor_index u2<br>attributes_count u2<br>attribute_info attributes[attributes_count];<h3 id="access-flags"><a href="#access-flags" class="headerlink" title="access_flags"></a>access_flags</h3>Flag Name |Value |Interpretat<br>|–|–|–|<br>ACC_PUBLIC |0x0001 |public<br>ACC_PRIVATE |0x0002 |private<br>ACC_PROTECTED |0x0004 |protected<br>ACC_STATIC |0x0008 |static.<br>ACC_FINAL |0x0010 |final<br>ACC_VOLATILE |0x0040 |volatile<br>ACC_TRANSIENT |0x0080 |transient<br>ACC_SYNTHETIC |0x1000 |synthetic;<br>ACC_ENUM |0x4000 |枚举类型<ul><li>name_index u2<br>常量池引用 ，表示字段的名字</li></ul></li><li>descriptor_index<br>表示字段的类型<br>为了尽量少的占用空间，简单表示</li></ul><table><thead><tr><th>-</th><th>-</th></tr></thead><tbody><tr><td></td><td>B</td><td>byte</td><td></td></tr><tr><td></td><td>C</td><td>char</td><td></td></tr><tr><td></td><td>D</td><td>double</td><td></td></tr><tr><td></td><td>F</td><td>float</td><td></td></tr><tr><td></td><td>I</td><td>int</td><td></td></tr><tr><td></td><td>J</td><td>long</td><td></td></tr><tr><td></td><td>S</td><td>short</td><td></td></tr><tr><td></td><td>Z</td><td>boolean</td><td></td></tr><tr><td></td><td>V</td><td>void</td><td></td></tr><tr><td></td><td>L</td><td>对象Ljava/lang/Object;</td><td></td></tr><tr><td></td><td>[</td><td>数组 [[Ljava/lang/String; = String[][] 二维数组[[</td><td></td></tr></tbody></table><h3 id="小问题"><a href="#小问题" class="headerlink" title="小问题"></a>小问题</h3><p>descriptor_index的字符串存放位置在哪里？</p><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><ul><li>methods_count<br>方法数量</li><li>methods<br>methods_count个method_info<h3 id="method-info"><a href="#method-info" class="headerlink" title="method_info"></a>method_info</h3>access_flags u2<br>name_index u2<br>descriptor_index u2<br>attributes_count u2<br>attribute_info attributes[attributes_count];<h4 id="access-flag"><a href="#access-flag" class="headerlink" title="access flag"></a>access flag</h4>|-|-|-|<br>|–|–|–|<br>Flag Name | Value |Interpretation<br>ACC_PUBLIC | 0x0001 |public<br>ACC_PRIVATE | 0x0002 |private<br>ACC_PROTECTED | 0x0004 |protected<br>ACC_STATIC | 0x0008 |static<br>ACC_FINAL | 0x0010 |final<br>ACC_SYNCHRONIZED| 0x0020 |synchronized<br>ACC_BRIDGE | 0x0040 |编译器产生 桥接方法<br>ACC_VARARGS | 0x0080 |可变参数<br>ACC_NATIVE | 0x0100 |native<br>ACC_ABSTRACT | 0x0400 |abstract<br>ACC_STRICT | 0x0800 |strictfp<br>ACC_SYNTHETIC | 0x1000 |不在源码中，由编译器产<h4 id="name-index-u2"><a href="#name-index-u2" class="headerlink" title="name_index u2"></a>name_index u2</h4>方法名字，常量池UTF-8索引<h4 id="descriptor-index-u2"><a href="#descriptor-index-u2" class="headerlink" title="descriptor_index u2"></a>descriptor_index u2</h4>描述符，用于表达方法的参数和返回值</li><li>方法描述符<br>void inc() ()V<br>void setId(int) (I)V<br>int indexOf(char[],int ) ([CI)I<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2></li><li>在field和method中，可以有若干个attribute，类文件也有attribute，用于描述一些额外的信息<br>attribute_name_index u2<br>名字，指向常量池UTF-8<br>attribute_length u4<br>长度<br>info[attribute_length] u1<br>内容</li><li>attribute本身也可以包含其他attribute(即可嵌套的)</li><li>随着JDK的发展不断有新的attribute加入</li></ul><table><thead><tr><th>类型</th><th>名称</th><th>数量</th></tr></thead><tbody><tr><td></td></tr></tbody></table><p>u2 |methods_count | 1 |<br>method_info |methods | methods_count |<br>u2 |attribute_count | 1 |<br>attribute_info |attributes | attributes_count |</p><table><thead><tr><th>名称</th><th>使用者</th><th>描述</th></tr></thead><tbody><tr><td>Deprecated</td><td>field method</td><td>字段、方法、类被废弃</td></tr><tr><td>ConstantValue</td><td>field</td><td>final常量</td></tr><tr><td>Code</td><td>method</td><td>方法的字节码和其他数据</td></tr><tr><td>ptions</td><td>method</td><td>方法的异常</td></tr><tr><td>LineNumberTable</td><td>Code_Attribute</td><td>方法行号和字节码映射</td></tr><tr><td>LocalVaribleTable</td><td>Code_Attribute</td><td>方法局部变量表描述</td></tr><tr><td>ceFile</td><td>Class file</td><td>源文件名</td></tr><tr><td>hetic</td><td>field method</td><td>编译器产生的方法或字段</td></tr></tbody></table><p>LineNUmberTable和LocalVatibleTable是Code_attribute的，即Attribute是可以嵌套使用的</p><h3 id="Deprecated"><a href="#Deprecated" class="headerlink" title="Deprecated"></a>Deprecated</h3><p>attribute_name_index u2<br>attribute_length u4</p><ul><li>attribute_name_index<br>指向包含Deprecated的UTF-8常量</li><li>attribute_length<br>为0<h3 id="ConstantantValue"><a href="#ConstantantValue" class="headerlink" title="ConstantantValue"></a>ConstantantValue</h3>attribute_name_index u2<br>attribute_length u4<br>constantvalue_index u2</li><li>attribute_name_index<br>包含ConstantantValue字面量的UTF-8索引</li><li>attribute_length<br>为2</li><li>constantvalue_index<br>常量值，指向常量池，可以是UTF-8，Float, Double 等</li></ul><p>public static final int sid=99;<br><img alt="在这里插入图片描述" data-original="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70-20190304160706370.png"></p><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Code_attribute &#123;</span><br><span class="line">    u2 attribute_name_index;<span class="comment">//Code</span></span><br><span class="line">    u4 attribute_length;</span><br><span class="line">    u2 max_stack;</span><br><span class="line">    u2 max_locals;</span><br><span class="line">    u4 code_length;<span class="comment">//字节码长度</span></span><br><span class="line">    u1 code[code_length];<span class="comment">//字节码</span></span><br><span class="line">    u2 exception_table_length;<span class="comment">//异常表长度</span></span><br><span class="line">    &#123;   u2 start_pc;<span class="comment">//异常处理的开始位置</span></span><br><span class="line">        u2 end_pc;</span><br><span class="line">        u2 handler_pc;<span class="comment">//处理这个异常的字节码位置</span></span><br><span class="line">        <span class="comment">//如果出现异常处理代码的指针就会偏移到这里</span></span><br><span class="line">        u2 catch_type;<span class="comment">//处理的异常类型，指向Constant_Class的指针</span></span><br><span class="line">        <span class="comment">//是什么类型的异常</span></span><br><span class="line">    &#125; exception_table[exception_table_length];</span><br><span class="line">    u2 attributes_count;<span class="comment">//属性数量</span></span><br><span class="line">    <span class="comment">//在code基础上封装的属性，比如LineNumberTable</span></span><br><span class="line">    attribute_info attributes[attributes_count];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="LineNumberTable-Code属性的属性-字节码的偏移量和对应的行号"><a href="#LineNumberTable-Code属性的属性-字节码的偏移量和对应的行号" class="headerlink" title="LineNumberTable - Code属性的属性(字节码的偏移量和对应的行号)"></a>LineNumberTable - Code属性的属性(字节码的偏移量和对应的行号)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">LineNumberTable_attribute &#123;</span><br><span class="line">    u2 attribute_name_index;<span class="comment">//UTF-8常量池，字面量LineNumberTable</span></span><br><span class="line"></span><br><span class="line">    u4 attribute_length;</span><br><span class="line"></span><br><span class="line">    u2 line_number_table_length;<span class="comment">//表项</span></span><br><span class="line"></span><br><span class="line">    &#123;   u2 start_pc;<span class="comment">//字节码偏移量和对应的行号</span></span><br><span class="line">        u2 line_number;	</span><br><span class="line">    &#125; line_number_table[line_number_table_length];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="LocalVariableTable-Code属性的属性-局部变量表"><a href="#LocalVariableTable-Code属性的属性-局部变量表" class="headerlink" title="LocalVariableTable -  Code属性的属性(局部变量表)"></a>LocalVariableTable - Code属性的属性(局部变量表)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">LocalVariableTable_attribute &#123;</span><br><span class="line">    u2 attribute_name_index;<span class="comment">//UTF-8常量池，字面量LocalVariableTable</span></span><br><span class="line">    u4 attribute_length;</span><br><span class="line">    u2 local_variable_table_length;</span><br><span class="line"></span><br><span class="line">    &#123;   u2 start_pc;<span class="comment">//局部变量作用域，从哪里开始</span></span><br><span class="line">        u2 length;</span><br><span class="line">        u2 name_index;<span class="comment">//局部变量名称</span></span><br><span class="line">        u2 descriptor_index;<span class="comment">//类型</span></span><br><span class="line">        u2 index;<span class="comment">//局部变量的Slot位置</span></span><br><span class="line">        <span class="comment">//局部变量的slot是能够重用的，为了节省空间，后面局部变量会重用前面局部变量的slot</span></span><br><span class="line">        <span class="comment">//slot的意思是”变量槽“</span></span><br><span class="line">    &#125; local_variable_table[local_variable_table_length];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Exceptions属性"><a href="#Exceptions属性" class="headerlink" title="Exceptions属性"></a>Exceptions属性</h3><p>和Code属性平级<br>表示方法抛出的异常 <strong><font color="red">(不是try catch部分，而是 throws部分)</font></strong></p><ul><li>结构<br>attribute_name_index u2<br>attribute_length u4<br>number_of_exceptions u2<br>exception_index_table[number_of_exceptions] u2 这个class就是要抛出的异常的类<br>指向Constant_Class的索引<h4 id="举个🌰"><a href="#举个🌰" class="headerlink" title="举个🌰"></a>举个🌰</h4></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">void</span> setAge(int age)  throws IOException&#123;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;<span class="keyword">catch</span>(IllegalStateException e)&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img alt="在这里插入图片描述" data-original="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70-20190304160710163.png"><br>code里面的Exception即try catch的是第五个字节码如果发生了异常，就跳转到第八个字节码，上小节有讲到。</p><h3 id="SourceFile"><a href="#SourceFile" class="headerlink" title="SourceFile"></a>SourceFile</h3><p>描述生成Class文件的源码文件名称</p><ul><li>结构<br>attribute_name_index u2<br>attribute_length u4<br>固定为2<br>soucefile_index u2文件名<br>UTF-8常量索引<h1 id="class文件结构🌰"><a href="#class文件结构🌰" class="headerlink" title="class文件结构🌰"></a>class文件结构🌰</h1><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	private int id;</span><br><span class="line">	private <span class="built_in">String</span> name;</span><br><span class="line">	private int age;</span><br><span class="line">	public int getId() &#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	public <span class="keyword">void</span> setId(int id) &#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	public <span class="built_in">String</span> getName() &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	public <span class="keyword">void</span> setName(<span class="built_in">String</span> name) &#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	public int getAge() &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	public <span class="keyword">void</span> setAge(int age) &#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><img alt="在这里插入图片描述" data-original="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70-20190304160709322.png"><br>0123 魔数，表示是class文件<br>45 小版本<br>67 大版本<br>89 常量池的个数0025表示36个常量<br>接着开始描述常量池里面的内容<br>A 07 表示class类型的常量（上面有对应的表格）<br>class类型的常量里有0002，表示指向常量池的指针，这个类的utf-8的描述是常量池的第二个，第二个是什么呢？看D 发现是01类型的就是utf-8。然后是长度001B，即27，内容是geym/————User，至此完整描述了一个类</p><p>常量池里面一共36个，这里不一一的进行分析<br><img alt="在这里插入图片描述" data-original="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70-20190304160708880.png"><br>access_flag访问权限 0021表示public和super<br>然后thisclass，跟上常量池的第一个，第一个就是类本身<br>superclass，父类<br>interface，接口，没有实现接口，所以是0，<br>field count 0003三个，确实是三个字段<br>0002 第一个字段开始描述了，field count 之后就是具体信息的描述，这里的0002表示field是private的即私有的<br>0005 field名字的索引在常量池中的索引是第五个<br>0006 描述符，大写的I 表示这个field的类型是一个int类型<br>0000 attribute 没有attribute</p><p>以此类推将三个field解读一下。<br>0007,field描述完之后开始描述方法method count 7个方法上面一共有六个，7个因为还有一个构造函数<br>0001 public方法<br>000A方法名字的索引表示的是init方法。<br>000B方法描述<br>0001attribute count属性的值</p><p>离散的标出了几个方法的开始<br>00010013<br>00010017<br>000100<br>0001001D<br>0001001F</p><p>00010022表示最后一个方法setAge<br>0018方法的descritor方法的描述签名<br>0001attribute count 1<br>000c code属性<br>0000003E changdu 62<br>0002max stack最大栈的大小<br>0002max locals最大局部变量表的大小<img alt="在这里插入图片描述" data-original="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70-20190304160707218.png"><br>上图表示code<br>00000006 6个byte<br>2A1BB50020B1系统中真正运行的字节码<br>0000异常表因为没有异常所以为空<br>0002属性属性<br>000Flinenumbertable<br>0000000A长度为10<br>0002linenumber table lenth表象<br>0000 0017 0005 0018 分别为偏移量和行号<br>0010 局部变量表<br>00000016 长度22<br>。。。<br><img alt="在这里插入图片描述" data-original="https://img-blog.csdnimg.cn/20190304134755173.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70"><br>0002局部变量表的表象的长度<br>0000偏移量<br>0006长度作用范围<br>0011第一局部变量的名字，this<br>0012局部变量的类型user<br>0000slot第一个slot被它所占<br>00000006另一个局部变量的信息<br>0001attribute其他的属性 还有一个<br>0023哪个源文件声称出来的<br>00000002长度2<br>0024指向索引，类是由User.java编译出来的。</p></div><div><div><div style="text-align:center;color:#555;font-size:14px">-------------The End-------------</div></div></div><div><div class="my_post_copyright"><p><span>本文标题:</span><a href="/2019-03-04-1.html">JVM内核-原理、诊断与优化学习笔记（十）：Class文件结构</a></p><p><span>文章作者:</span><a href="/" title="访问 Leesin.Dong 的个人博客">Leesin.Dong</a></p><p><span>发布时间:</span>2019年03月04日 - 10:03</p><p><span>最后更新:</span>2019年03月12日 - 20:03</p><p><span>原始链接:</span><a href="/2019-03-04-1.html" title="JVM内核-原理、诊断与优化学习笔记（十）：Class文件结构">http://mmmmmm.me/2019-03-04-1.html</a></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>客官客官，不可以，你要对我负责～～～</div><button id="rewardButton" disable="enable"><script>window.onload=function(){var n=document.getElementById("QR"),e=document.getElementById("rewardButton");e.onclick=function(){"none"===n.style.display?n.style.display="block":n.style.display="none"}}</script><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" alt="Leesin.Dong 微信支付" data-original="/images/wechatpay.jpg"><p>微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" alt="Leesin.Dong 支付宝" data-original="/images/alipay.jpg"><p>支付宝</p></div></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/JVM/" rel="tag"><i class="fa fa-tag"></i> JVM</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019-03-03-2.html" rel="next" title="JVM内核-原理、诊断与优化学习笔记（九）：锁"><i class="fa fa-chevron-left"></i> JVM内核-原理、诊断与优化学习笔记（九）：锁</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019-03-05-1.html" rel="prev" title="JVM内核-原理、诊断与优化学习笔记（十一）：JVM字节码执行">JVM内核-原理、诊断与优化学习笔记（十一）：JVM字节码执行 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div id="gitalk-container"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Leesin.Dong" data-original="/images/header.jpg"><p class="site-author-name" itemprop="name">Leesin.Dong</p><p class="site-description motion-element" itemprop="description">To be a better me</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">58</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">14</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">11</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/dataiyangu" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/dataiyangu" target="_blank" title="CSDN"><i class="fa fa-fw fa-copyright"></i>CSDN</a> </span><span class="links-of-author-item"><a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=32248827@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-E-Mail"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://mobile.twitter.com/dataiyangu" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i>Twitter</a> </span><span class="links-of-author-item"><a href="https://www.facebook.com/leesin.dong.923" target="_blank" title="FB Page"><i class="fa fa-fw fa-facebook"></i>FB Page</a> </span><span class="links-of-author-item"><a href="http://wpa.qq.com/msgrd?v=3&uin=32248827&site=hupaiyule&menu=yes" target="_blank" title="QQ"><i class="fa fa-fw fa-qq"></i>QQ</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> link</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://blog.csdn.net/dataiyangu" title="我的CSDN" target="_blank">我的CSDN</a></li><li class="links-of-blogroll-item"><a href="https://yelog.org" title="叶落阁" target="_blank">叶落阁</a></li><li class="links-of-blogroll-item"><a href="http://www.bianxiaofeng.com" title="边小丰" target="_blank">边小丰</a></li><li class="links-of-blogroll-item"><a href="https://qqdie.com" title="QQ爹" target="_blank">QQ爹</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#语言无关性"><span class="nav-number">1.</span> <span class="nav-text">语言无关性</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件结构"><span class="nav-number">2.</span> <span class="nav-text">文件结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#魔数"><span class="nav-number">2.1.</span> <span class="nav-text">魔数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#版本"><span class="nav-number">2.2.</span> <span class="nav-text">版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常量池"><span class="nav-number">2.3.</span> <span class="nav-text">常量池</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CONSTANT-Utf8"><span class="nav-number">2.3.1.</span> <span class="nav-text">CONSTANT_Utf8</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CONSTANT-Integer"><span class="nav-number">2.3.2.</span> <span class="nav-text">CONSTANT_Integer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CONSTANT-String"><span class="nav-number">2.3.3.</span> <span class="nav-text">CONSTANT_String</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CONSTANT-NameAndType"><span class="nav-number">2.3.4.</span> <span class="nav-text">CONSTANT_NameAndType</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CONSTANT-Class"><span class="nav-number">2.3.5.</span> <span class="nav-text">CONSTANT_Class</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CONSTANT-Fieldref-CONSTANT-Methodref-CONSTANT-InterfaceMethodref"><span class="nav-number">2.3.6.</span> <span class="nav-text">CONSTANT_Fieldref ,CONSTANT_Methodref ,CONSTANT_InterfaceMethodref</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#访问标识符"><span class="nav-number">2.4.</span> <span class="nav-text">访问标识符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类、超类、接口"><span class="nav-number">2.5.</span> <span class="nav-text">类、超类、接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字段"><span class="nav-number">2.6.</span> <span class="nav-text">字段</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#access-flags"><span class="nav-number">2.6.1.</span> <span class="nav-text">access_flags</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#小问题"><span class="nav-number">2.6.2.</span> <span class="nav-text">小问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法"><span class="nav-number">2.7.</span> <span class="nav-text">方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#method-info"><span class="nav-number">2.7.1.</span> <span class="nav-text">method_info</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#access-flag"><span class="nav-number">2.7.1.1.</span> <span class="nav-text">access flag</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#name-index-u2"><span class="nav-number">2.7.1.2.</span> <span class="nav-text">name_index u2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#descriptor-index-u2"><span class="nav-number">2.7.1.3.</span> <span class="nav-text">descriptor_index u2</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#属性"><span class="nav-number">2.8.</span> <span class="nav-text">属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Deprecated"><span class="nav-number">2.8.1.</span> <span class="nav-text">Deprecated</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ConstantantValue"><span class="nav-number">2.8.2.</span> <span class="nav-text">ConstantantValue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Code"><span class="nav-number">2.8.3.</span> <span class="nav-text">Code</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LineNumberTable-Code属性的属性-字节码的偏移量和对应的行号"><span class="nav-number">2.8.4.</span> <span class="nav-text">LineNumberTable - Code属性的属性(字节码的偏移量和对应的行号)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LocalVariableTable-Code属性的属性-局部变量表"><span class="nav-number">2.8.5.</span> <span class="nav-text">LocalVariableTable - Code属性的属性(局部变量表)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exceptions属性"><span class="nav-number">2.8.6.</span> <span class="nav-text">Exceptions属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#举个🌰"><span class="nav-number">2.8.6.1.</span> <span class="nav-text">举个🌰</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SourceFile"><span class="nav-number">2.8.7.</span> <span class="nav-text">SourceFile</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#class文件结构🌰"><span class="nav-number">3.</span> <span class="nav-text">class文件结构🌰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#代码"><span class="nav-number">3.1.</span> <span class="nav-text">代码</span></a></li></ol></li></ol></div></div></section></div></aside></div><script>function password(){}var div=$(".post-body"),toc=$(".post-toc-wrap");password()</script></main></div><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2019</span> <span class="with-love" id="heart"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Leesin.Dong</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i>总访客 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人 </span><span class="site-pv"><i class="fa fa-eye"></i>访问量 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea");document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus();var o=document.execCommand("copy");document.body.removeChild(n),o?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})</script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css"><script src="/lib/algolia-instant-search/instantsearch.min.js"></script><script src="/js/src/algolia-search.js?v=5.1.4"></script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("6og9b7lpddMqazBCDe8z4HqL-gzGzoHsz","faKN7dalSdXLmYYJTRq98B1f")</script><script>function showTime(e){var t=new AV.Query(e),n=[],o=$(".leancloud_visitors");o.each(function(){n.push($(this).attr("id").trim())}),t.containedIn("url",n),t.find().done(function(e){var t=".leancloud-visitors-count";if(0===e.length)return void o.find(t).text(0);for(var i=0;i<e.length;i++){var r=e[i],s=r.get("url"),l=r.get("time"),c=document.getElementById(s);$(c).find(t).text(l)}for(var i=0;i<n.length;i++){var s=n[i],c=document.getElementById(s),u=$(c).find(t);""==u.text()&&u.text(0)}}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var r=new e,s=new AV.ACL;s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),r.setACL(s),r.set("title",o),r.set("url",n),r.set("time",1),r.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></body></html><script src="/js/src/pjax/lazyload_min.js"></script><script src="/js/src/pjax/comments/comments.gitalk.js"></script><script src="/js/src/pjax/require.js" defer async data-main="/js/src/pjax/main.js"></script><!-- rebuild by neat -->