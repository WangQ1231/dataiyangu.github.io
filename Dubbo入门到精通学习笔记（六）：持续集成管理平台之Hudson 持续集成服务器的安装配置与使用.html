<!-- build time:Fri Apr 05 2019 21:57:27 GMT+0800 (China Standard Time) --><!DOCTYPE html><script src="/js/src/pjax/jquery_min_js.js"></script><script src="/js/src/pjax/jquery_pjax_min_js.js"></script><script src="/js/src/pjax/pjaxMain.js"></script><html class="theme-next muse use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-flash.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4"><link rel="mask-icon" href="/images/favicon.ico?v=5.1.4" color="#222"><link rel="manifest" href="/images/favicon.ico"><meta name="msapplication-config" content="/images/favicon.ico"><meta name="keywords" content="Hexo, NexT"><link rel="alternate" href="/atom.xml" title="Leesin's Blog" type="application/atom+xml"><meta name="description" content="版权声明：本文为作者原创，转载请注明出处，联系qq：32248827 https://blog.csdn.net/dataiyangu/article/details/88608183安装Hudson使用Hudsontips：自动化部署附录：两个脚本安装HudsonIP:192.168.4.221 8G 内存(Hudson 多个工程在同时构建的情况下比较耗内存)环境:CentOS 6.6、JDK7"><meta property="og:type" content="article"><meta property="og:title" content="Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用"><meta property="og:url" content="http://mmmmmm.me/Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用.html"><meta property="og:site_name" content="Leesin&#39;s Blog"><meta property="og:description" content="版权声明：本文为作者原创，转载请注明出处，联系qq：32248827 https://blog.csdn.net/dataiyangu/article/details/88608183安装Hudson使用Hudsontips：自动化部署附录：两个脚本安装HudsonIP:192.168.4.221 8G 内存(Hudson 多个工程在同时构建的情况下比较耗内存)环境:CentOS 6.6、JDK7"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2019-03-17T11:24:41.252Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用"><meta name="twitter:description" content="版权声明：本文为作者原创，转载请注明出处，联系qq：32248827 https://blog.csdn.net/dataiyangu/article/details/88608183安装Hudson使用Hudsontips：自动化部署附录：两个脚本安装HudsonIP:192.168.4.221 8G 内存(Hudson 多个工程在同时构建的情况下比较耗内存)环境:CentOS 6.6、JDK7"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.4",sidebar:{position:"left",display:"hide",offset:12,b2t:!1,scrollpercent:!1,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"P88H67GUII",apiKey:"5489ac7ce78f59f4a8cb5445035f54d8",indexName:"dataiyangu",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://mmmmmm.me/Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用.html"><title>Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用 | Leesin's Blog</title></head><body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans"><link rel="stylesheet" href="/dist/APlayer.min.css"><div class="hover_sidebar"></div><header id="header_left" class="header_left" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header_left_inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu_left" class="menu_left"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-top"><a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i><br>热度</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="menu-item-icon fa fa-fw fa-heart"></i><br>留言</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="algolia-popup popup search-popup"><div class="algolia-search"><div class="algolia-search-input-icon"><i class="fa fa-search"></i></div><div class="algolia-search-input" id="algolia-search-input"></div></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div id="algolia-pagination" class="algolia-pagination"></div></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div></div></nav></div><div class="header_sidebar">黑匣子</div></header><div class="eye"><div class="eye1"><ul><li style="background-color:#C7EDCC">豆沙绿</li><li style="background-color:#FAF9DE">杏仁黄</li><li style="background-color:#FFF">银河白</li><li style="background-color:#323232">极光黑</li><li style="background-color:#FFF2E2">秋叶褐</li><li style="background-color:#FDE6E0">胭脂红</li><li style="background-color:#E3EDCD">青草绿</li><li style="background-color:#DCE2F1">海天蓝</li><li style="background-color:#E9EBFE">葛巾紫</li><li style="background-color:#EAEAEF">极光灰</li><li style="background-color:#cce8cf">qq管家</li></ul></div><div class="eye2">满天星</div></div><div id="aplayer"></div><script type="text/javascript" src="/dist/APlayer.min.js"></script><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><a href="https://github.com/dataiyangu?tab=repositories"><img style="position:absolute;top:0;left:0;border:0" alt="Fork me on GitHub" data-original="/images/github_fork.png"></a><div class="bg_content"><canvas id="canvas"></canvas></div><header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Leesin's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">To be a better me</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-top"><a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i><br>热度</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="menu-item-icon fa fa-fw fa-heart"></i><br>留言</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="algolia-popup popup search-popup"><div class="algolia-search"><div class="algolia-search-input-icon"><i class="fa fa-search"></i></div><div class="algolia-search-input" id="algolia-search-input"></div></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div id="algolia-pagination" class="algolia-pagination"></div></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div></div></nav></div></header><div id="pjax-container"><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article data-scroll-reveal="enter bottom move 80px over 1s after 0.0s" class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://mmmmmm.me/Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用.html"><span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Leesin.Dong"><meta itemprop="description" content=""><meta itemprop="image" content="/images/header.jpg"></span><span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Leesin's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-16T23:03:12+08:00">2019-03-16 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Hudson/" itemprop="url" rel="index"><span itemprop="name">------------Hudson</span> </a></span></span><span id="/Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用.html" class="leancloud_visitors" data-flag-title="Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数&#58;</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-divider">|</span> <span class="page-pv"><i class="fa fa-file-o"></i>Read the number <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>times</span><div class="post-wordcount"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">3.6k字 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">15分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><p>版权声明：本文为作者原创，转载请注明出处，联系qq：32248827 <a href="https://blog.csdn.net/dataiyangu/article/details/88608183" target="_blank" rel="noopener">https://blog.csdn.net/dataiyangu/article/details/88608183</a></p><ul><li><a href="">安装Hudson</a></li><li><p><a href="">使用Hudson</a></p></li><li><p><a href="">tips：自动化部署</a></p></li><li><a href="">附录：两个脚本</a></li></ul><h1 id="安装Hudson"><a href="#安装Hudson" class="headerlink" title="安装Hudson"></a><a href=""></a>安装Hudson</h1><p>IP:192.168.4.221 8G 内存(Hudson 多个工程在同时构建的情况下比较耗内存)<br>环境:CentOS 6.6、JDK7<br><strong>Hudson 不需要用到数据库</strong><br>Hudson 只是一个持续集成服务器(持续集成工具)，要想搭建一套完整的持续集成管理平台， 还需要用到前面课程中所讲到的 SVN、Maven、Sonar 等工具，按需求整合则可。<br><img alt="在这里插入图片描述" data-original="../images/20190316212631882--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>上图可以看出hudson对项目进行构建，构建完成了之后需要装载到本地maven库，并发布到私有库所以需要在这里安装maven</p><p>1、 安装 JDK 并配置环境变量(略)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=<span class="regexp">/usr/</span>local/java/jdk1<span class="number">.7</span><span class="number">.0</span>_72</span><br></pre></td></tr></table></figure><p>2、 Maven 本地仓库的安装(使用 Maven 作为项目构建与管理工具):<br>(1)下载 maven-3.0.5<br>(注意:建议不要下载 3.1 或更高版本的 Maven，因为与 Hudson 进行集成时会有问题， 之前有遇到过):<br></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># wget http://mirrors.hust.edu.cn/apache/maven/maven-3/3.0.5/binaries/apache-maven- 3.0.5-bin.tar.gz</span><br></pre></td></tr></table></figure><p></p><p>(2)解压:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># tar -zxvf apache-maven-3.0.5-bin.tar.gz # mv apache-maven-3.0.5 maven-3.0.5</span><br></pre></td></tr></table></figure><p>(3)配置 Maven 环境变量:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># vi /etc/profile</span><br><span class="line">## maven env</span><br><span class="line"><span class="keyword">export</span> MAVEN_HOME=<span class="regexp">/root/m</span>aven<span class="number">-3.0</span><span class="number">.5</span> <span class="keyword">export</span> PATH=$PATH:$MAVEN_HOME/bin</span><br><span class="line"># source /etc/profile</span><br></pre></td></tr></table></figure><p>(4)Maven 本地库配置:settings.xml</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line"></span><br><span class="line">&lt;settings xmlns=<span class="string">"http://maven.apache.org/SETTINGS/1.0.0"</span> </span><br><span class="line">          xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> </span><br><span class="line">          xsi:schemaLocation=<span class="string">"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"</span>&gt;</span><br><span class="line">   <span class="comment">//配置本地库的路径</span></span><br><span class="line">	&lt;localRepository&gt;<span class="regexp">/root/m</span>aven<span class="number">-3.0</span><span class="number">.5</span>/.m2/repository&lt;<span class="regexp">/localRepository&gt;</span></span><br><span class="line"><span class="regexp">	&lt;interactiveMode&gt;true&lt;/i</span>nteractiveMode&gt;</span><br><span class="line">    &lt;offline&gt;<span class="literal">false</span>&lt;<span class="regexp">/offline&gt;</span></span><br><span class="line"><span class="regexp">    &lt;pluginGroups&gt;</span></span><br><span class="line"><span class="regexp">        &lt;pluginGroup&gt;org.mortbay.jetty&lt;/</span>pluginGroup&gt;</span><br><span class="line">        &lt;pluginGroup&gt;org.jenkins-ci.tools&lt;<span class="regexp">/pluginGroup&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>pluginGroups&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!--配置权限,使用默认用户--&gt;</span><br><span class="line">	&lt;servers&gt;</span><br><span class="line">		&lt;server&gt;</span><br><span class="line">			&lt;id&gt;nexus-releases&lt;<span class="regexp">/id&gt;</span></span><br><span class="line"><span class="regexp">			&lt;username&gt;deployment&lt;/u</span>sername&gt;</span><br><span class="line">			&lt;password&gt;deployment123&lt;<span class="regexp">/password&gt;</span></span><br><span class="line"><span class="regexp">		&lt;/</span>server&gt;</span><br><span class="line">		&lt;server&gt; </span><br><span class="line">			&lt;id&gt;nexus-snapshots&lt;<span class="regexp">/id&gt;</span></span><br><span class="line"><span class="regexp">			&lt;username&gt;deployment&lt;/u</span>sername&gt;</span><br><span class="line">			&lt;password&gt;deployment123&lt;<span class="regexp">/password&gt;</span></span><br><span class="line"><span class="regexp">		&lt;/</span>server&gt;</span><br><span class="line">	&lt;<span class="regexp">/servers&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;mirrors&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;/mi</span>rrors&gt;</span><br><span class="line"></span><br><span class="line">	&lt;profiles&gt;</span><br><span class="line">		&lt;profile&gt;</span><br><span class="line">			&lt;id&gt;edu&lt;<span class="regexp">/id&gt;</span></span><br><span class="line"><span class="regexp">			&lt;activation&gt;</span></span><br><span class="line"><span class="regexp">				&lt;activeByDefault&gt;false&lt;/</span>activeByDefault&gt;</span><br><span class="line">				&lt;jdk&gt;<span class="number">1.6</span>&lt;<span class="regexp">/jdk&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>activation&gt;</span><br><span class="line">			&lt;repositories&gt;</span><br><span class="line">				&lt;!-- 私有库地址--&gt;</span><br><span class="line">				<span class="comment">//因为私有库也在这个机器所以修改路径为localhost</span></span><br><span class="line">				<span class="comment">//当然视实际情况而定</span></span><br><span class="line">				&lt;repository&gt;</span><br><span class="line">					&lt;id&gt;nexus&lt;<span class="regexp">/id&gt;</span></span><br><span class="line"><span class="regexp">					&lt;url&gt;http:/</span><span class="regexp">/localhost:8081/</span>nexus/content/groups/public/<span class="xml"><span class="tag">&lt;/<span class="name">url</span>&gt;</span></span></span><br><span class="line">					&lt;releases&gt;</span><br><span class="line">						&lt;enabled&gt;<span class="literal">true</span>&lt;<span class="regexp">/enabled&gt;</span></span><br><span class="line"><span class="regexp">					&lt;/</span>releases&gt;</span><br><span class="line">					&lt;snapshots&gt;</span><br><span class="line">						&lt;enabled&gt;<span class="literal">true</span>&lt;<span class="regexp">/enabled&gt;</span></span><br><span class="line"><span class="regexp">					&lt;/</span>snapshots&gt;</span><br><span class="line">				&lt;<span class="regexp">/repository&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>repositories&gt;      </span><br><span class="line">			&lt;pluginRepositories&gt;</span><br><span class="line">				&lt;!--插件库地址--&gt;</span><br><span class="line">				&lt;pluginRepository&gt;</span><br><span class="line">					&lt;id&gt;nexus&lt;<span class="regexp">/id&gt;</span></span><br><span class="line"><span class="regexp">					&lt;url&gt;http:/</span><span class="regexp">/localhost:8081/</span>nexus/content/groups/public/<span class="xml"><span class="tag">&lt;/<span class="name">url</span>&gt;</span></span></span><br><span class="line">					&lt;releases&gt;</span><br><span class="line">						&lt;enabled&gt;<span class="literal">true</span>&lt;<span class="regexp">/enabled&gt;</span></span><br><span class="line"><span class="regexp">					&lt;/</span>releases&gt;</span><br><span class="line">					&lt;snapshots&gt;</span><br><span class="line">						&lt;enabled&gt;<span class="literal">true</span>&lt;<span class="regexp">/enabled&gt;</span></span><br><span class="line"><span class="regexp">				   &lt;/</span>snapshots&gt;</span><br><span class="line">				&lt;<span class="regexp">/pluginRepository&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>pluginRepositories&gt;</span><br><span class="line">		&lt;<span class="regexp">/profile&gt;</span></span><br><span class="line"><span class="regexp">		</span></span><br><span class="line"><span class="regexp">		/</span><span class="regexp">/因为sonar也在本机，所以修改为localhost，当然视实际情况而定。</span></span><br><span class="line"><span class="regexp">		/</span><span class="regexp">/这里可以不用配置其实，因为hudson对sonar有一个插件</span></span><br><span class="line"><span class="regexp">		/</span><span class="regexp">/如果不用插件就打开配置</span></span><br><span class="line"><span class="regexp">		&lt;!--</span></span><br><span class="line"><span class="regexp">		&lt;profile&gt;</span></span><br><span class="line"><span class="regexp">			&lt;id&gt;sonar&lt;/i</span>d&gt;</span><br><span class="line">			&lt;activation&gt;</span><br><span class="line">				&lt;activeByDefault&gt;<span class="literal">true</span>&lt;<span class="regexp">/activeByDefault&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>activation&gt;</span><br><span class="line">			&lt;properties&gt;</span><br><span class="line">				&lt;!-- Example <span class="keyword">for</span> MySQL--&gt;</span><br><span class="line">				&lt;sonar.jdbc.url&gt;</span><br><span class="line">					jdbc:mysql:<span class="comment">//localhost:3306/sonarqube?useUnicode=true&amp;amp;characterEncoding=utf8</span></span><br><span class="line">				&lt;<span class="regexp">/sonar.jdbc.url&gt;</span></span><br><span class="line"><span class="regexp">				&lt;sonar.jdbc.username&gt;root&lt;/</span>sonar.jdbc.username&gt;</span><br><span class="line">				&lt;sonar.jdbc.password&gt;wusc<span class="number">.123</span>&lt;<span class="regexp">/sonar.jdbc.password&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">				&lt;!-- Optional URL to server. Default value is http:/</span><span class="regexp">/localhost:9000 --&gt;</span></span><br><span class="line"><span class="regexp">				&lt;sonar.host.url&gt;</span></span><br><span class="line"><span class="regexp">					http:/</span><span class="regexp">/localhost:9090/</span>sonarqube</span><br><span class="line">				&lt;<span class="regexp">/sonar.host.url&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>properties&gt;</span><br><span class="line">		&lt;<span class="regexp">/profile&gt;</span></span><br><span class="line"><span class="regexp">		--&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>profiles&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!--激活profile--&gt;</span><br><span class="line">	&lt;activeProfiles&gt;</span><br><span class="line">		&lt;activeProfile&gt;edu&lt;<span class="regexp">/activeProfile&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>activeProfiles&gt;</span><br><span class="line">	</span><br><span class="line">&lt;<span class="regexp">/settings&gt;</span></span><br></pre></td></tr></table></figure><p>将settings.xml上传上去，将原来的文件覆盖掉。</p><p>3、 配置 HudsonHome，在/root 目录下创建 HudsonHome 目录，并配置到环境变量<br></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># mkdir HudsonHome</span><br><span class="line">切换到 root 用户，在/etc/profile 中配置全局环境变量</span><br><span class="line"># vi /etc/profile ## hudson env</span><br><span class="line"><span class="keyword">export</span> HUDSON_HOME=<span class="regexp">/root/</span>HudsonHome</span><br><span class="line"># source /etc/profile</span><br></pre></td></tr></table></figure><p></p><p>4、 下载最新版 Tomcat7，当前最新版为 7.0.59:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># wget http://apache.fayea.com/tomcat/tomcat-7/v7.0.59/bin/apache-tomcat- 7.0.59.tar.gz</span><br></pre></td></tr></table></figure><p>5、 解压安装 Tomcat:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># tar -zxvf apache-tomcat-7.0.59.tar.gz # mv apache-tomcat-7.0.59 hudson-tomcat</span><br></pre></td></tr></table></figure><p>移除/root/hudson-tomcat/webapps 目录下的所有文件:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># rm -rf /root/hudson-tomcat/webapps/*</span><br></pre></td></tr></table></figure><p>将 Tomcat 容器的编码设为 UTF-8:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># vi /root/hudson-tomcat/conf/server.xml &lt;Connector port="8080" protocol="HTTP/1.1"</span><br><span class="line">connectionTimeout=<span class="string">"20000"</span> redirectPort=<span class="string">"8443"</span> URIEncoding=<span class="string">"UTF-8"</span> /&gt;</span><br></pre></td></tr></table></figure><p><strong>如果不把 Tomcat 容器的编码设为 UTF-8，在以后配置 Hudson 是有下面的提示:</strong><br><img alt="在这里插入图片描述" data-original="../images/20190316212709659--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>设置 hudson-tomcat 的内存，因为hudson是比较消耗内存的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># vi /root/hudson-tomcat/bin/catalina.sh </span><br><span class="line"><span class="meta">#!/bin/sh 下面增加: JAVA_OPTS='-Xms512m -Xmx2048m'</span></span><br></pre></td></tr></table></figure><p>6、 下载最新版的 Hudson(这里是 3.2.2 版)包:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># wget http://mirror.bit.edu.cn/eclipse/hudson/war/hudson-3.2.2.war</span><br></pre></td></tr></table></figure><p>将 war 包拷贝到 hudson-tomcat/weapps 目录，并重命名为 hudson.war</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cp /root/hudson-3.2.2.war /root/hudson-tomcat/webapps/hudson.war</span><br></pre></td></tr></table></figure><p>7、 防火墙开启 8080 端口，用 root 用户修改/etc/sysconfig/iptables，</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># vi /etc/sysconfig/iptables</span><br><span class="line">增加:</span><br><span class="line">## hudson-tomcat port:8080</span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport <span class="number">8080</span> -j ACCEPT</span><br></pre></td></tr></table></figure><p>重启防火墙:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># service iptables restart</span><br></pre></td></tr></table></figure><p>8、 设置 hudson-tomcat 开机启动: 在虚拟主机中编辑/etc/rc.local 文件，</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># vi /etc/rc.local</span><br></pre></td></tr></table></figure><p>加入:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/root/hudson-tomcat/bin/startup.sh</span><br></pre></td></tr></table></figure><p>9、 启动 hudson-tomcat</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># /root/hudson-tomcat/bin/startup.sh</span><br></pre></td></tr></table></figure><p>10、 配置 Hudson:<br>(1)浏览器输入:<a href="http://192.168.4.221:8080/hudson/" target="_blank" rel="noopener">http://192.168.4.221:8080/hudson/</a><br><img alt="在这里插入图片描述" data-original="../images/2019031621273335--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br><img alt="在这里插入图片描述" data-original="../images/20190316212747140--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>初始化安装需要安装 3 个默认勾选中的插件(如上图红色部分)，其它插件可以等初始 化安装完成之后再选择安装。<br>点击“Install”安装按钮后，需要等待一会时间才能安装完成。安装完成后按“Finish”按钮。<br>安装的插件保存在 /root/HudsonHome/plugins 目录。<br>(2)初始化完成后就会进行 Hudson 的配置管理界面:<br><img alt="在这里插入图片描述" data-original="../images/2019031621280240--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"></p><p>安全配置<br><img alt="在这里插入图片描述" data-original="../images/20190316213711428--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>使用项目矩阵授权策略<br>因为可能注册新的用户，所以在允许用户注册前面打钩<br><img alt="在这里插入图片描述" data-original="../images/20190316223501132--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br><img alt="在这里插入图片描述" data-original="../images/20190316223517731--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>注册成功后，在进入刚才的安全配置，发现刚才分配的admin用户前面的红线没有了，说明用户添加成功了</p><p>系统设置<br><img alt="在这里插入图片描述" data-original="../images/20190316223213985--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"></p><p>配置系统信息、JDK、Maven<br><img alt="在这里插入图片描述" data-original="../images/2019031622340828--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br><strong>注意在hudson中右边的 问号 “？” 点击展开有关于配置的详细介绍的配置指南等</strong><br>Instantce Tag：给这个管理平台命名<br>系统消息：想用户发布一些系统泛微内的通知或公告。<br>执行者数量：这个项目允许同时构建的数量，并发数量<br>生成前等待时间：构建之前需要等待的时间<br>SCM签出重试次数：如果从版本库签出代码失败，hudson会按照这个指定的次数进行重试之后再放弃。<br><img alt="在这里插入图片描述" data-original="../images/20190316224530403--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>上图是配置邮箱<br>SMTP服务器：配置为自己的邮箱<br>Hudson Url ：自己这个Hunson客户端在浏览器的路径（截止到项目名）<br>SMTP验证：自己邮箱的用户名，密码<br>端口：默认25<br>最后保存</p><p>保存后的效果</p><p><img alt="在这里插入图片描述" data-original="../images/20190316224551418--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"></p><p>结合我们想要实现的持续集成功能，需要安装如下几个插件。如想集成更多功能，自行 添加插件并配置则可。(注意:现在我们使用了 SonarQube 质量管理不台，则不再需要在 Hudson 中单独去安装 CheckStyle、Findbugs、PMD、Cobertura 等 Sonar 中已有的插件) 逐个搜索你想要安装的插件并点击安装，安装完之后重启 Hudson。<br>如下图所示:<br><img alt="在这里插入图片描述" data-original="../images/20190316225056198--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>需要安装的插件<br><img alt="在这里插入图片描述" data-original="../images/20190316225115374--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>安装完之后点击右上角的restart重启，重启才会生效<br>installed就是已经安装好的插件，<br>这些插件安装完之后，上面配置过的系统配置信息中会多出这些插件的配置选项</p><p>在 Hudson 中配置 SonarQube 链接<br><img alt="在这里插入图片描述" data-original="../images/2019031622513087--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>Server Url：之前sonar客户端首页的地址，因为是在本机安装的，所以可以是localhost<br>login：用户<br>password：密码<br>Server Public URL：也是sonar客户端的地址，但是不论局域网还是公网都能访问的ip，所以应该是真正的ip<br>Database URL：数据库连接<br>Database login：数据库用户<br>Database password：数据库密码<br>Database Driver：数据库驱动</p><p>以上就是 Hudson 的基本安装和配置，更多其它配置和功能可自行扩展。</p><h1 id="使用Hudson"><a href="#使用Hudson" class="headerlink" title="使用Hudson"></a><a href=""></a>使用Hudson</h1><p>Hudson 的使用(<strong>使用 Hudson 来自动化编译、分析、打包、发布、部署项目</strong>)<br>添加项目<br><img alt="在这里插入图片描述" data-original="../images/20190316230152117--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br><img alt="在这里插入图片描述" data-original="../images/20190316230202884--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>创建svn连接，创建连接的时候可能出现报错，点击”enter credential“&gt;选择 name/password进行授权，输入admin xxxx&gt;保存之后，回到如下刚才的页面，还报错==&gt;点击空白处，报错消失</p><p>poll SCM ：每过一段时间自动检测svn的代码时候有变动，有变动的话就自动进行构建，比如这里的设置就是每一分钟进行自动化构建。<br>Build peroidically：每天进行检测的策略。</p><p><img alt="在这里插入图片描述" data-original="../images/20190316230231357--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>项目的pom：pom.xml<br>Goals and options : clean install deploy<br>E-mail 记得勾选Send a e-mial for every unstable build，每次构建失败发邮件提醒。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一般还要勾选sonar</span><br></pre></td></tr></table></figure><p>，文章给出的图片没有勾选是因为，示例中要提交的项目是父项目，没有java文件，只有一个pom文件，不需要sonar</p><p><img alt="在这里插入图片描述" data-original="../images/20190316230256320--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>上图中点击Dubbo视频教程–持续集成下方的Hudson，如果在上面进行了设置的话，每过一段时间会自动构建，这里可以点击图中右边箭头素质的图标进行主动构建，从图中箭头左面所示可以看到正在构建。<br><img alt="在这里插入图片描述" data-original="../images/20190317062955933--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>点击左边箭头区域的项目名字，之后会出现一个黑点（长得有点像终端）&gt;点击黑点&gt;命令行输出==&gt;看到从配置的私服maven中下载需要的依赖，直到build success说明构建成功了。</p><p>再构建一个项目，注意这里有点技巧<br><img alt="在这里插入图片描述" data-original="../images/20190317063900964--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>因为刚才已经构建过一次了，这里只需要”复制现有任务“，选中刚才的任务即可。<br>进去之后只需要修改project name、 description、svn的url就行修改（当然还需要授权一次）</p><p>注意：上面的项目因为是父项目，没有java代码，所以没有勾选sonar，但是本次构建的项目中是有java代码的，所以这里需要勾选sonar，因为在上面的系统配置中已经配置了连接我们的sonarQube，所以这里不需要配置任何东西，<br><img alt="在这里插入图片描述" data-original="../images/20190317064239147--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>保存后发现多了sonar的图标。<br><img alt="在这里插入图片描述" data-original="../images/20190317064456743--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>接着按照第一个项目的步骤进行构建</p><p>上面的项目中没有用到sonar，所以构建完成就没有了，这里继承了sonar，从下图可以看到，构建完成之后，自动对代码进行了分析。<br><img alt="在这里插入图片描述" data-original="../images/20190317064653789--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>这个时候进入sonar的客户端<br><img alt="在这里插入图片描述" data-original="../images/20190317064920763--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>发现刚刚更新的项目</p><p>按照前面的方式将所有的项目构建进来（次省略）。</p><p>在构建service-user的时候注意<br><img alt="在这里插入图片描述" data-original="../images/20190317065634539--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>因为service-user是服务的实现，依赖于facade-user这个接口项目，所以希望，facede-user构建之后希望触发service-user也自动构建，也只有这样才能引入最新的facade-user<br>设置如图<br><img alt="在这里插入图片描述" data-original="../images/20190317070729786--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>上图中的Goals and options注意，改为clean install，因为这个项目是一个调用的接口，不需要被别人引用，所以不需要发布到私有maven库。</p><h2 id="tips：自动化部署"><a href="#tips：自动化部署" class="headerlink" title="tips：自动化部署"></a><a href=""></a>tips：自动化部署</h2><p>如何部署服务到其他的机器上？<br>首先在系统配置中增加ssh配置，如下图<br><img alt="在这里插入图片描述" data-original="../images/20190317071834852--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>username是ssh 的时候需要填写的用户<br>remote directory：远程存放项目的根目录</p><p>上面添加了一个provider的ssh，再添加一个client的ssh</p><p>对provider进行自动化部署<br><img alt="在这里插入图片描述" data-original="../images/20190317073013299--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>到Hudson部署的机器了解目录结构<br><img alt="在这里插入图片描述" data-original="../images/20190317073602153--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br><img alt="在这里插入图片描述" data-original="../images/20190317073607550--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>name：是项目的名字（在项目的ssh中配置过的名字）<br>source files：Hudson的工作空间下的项目，即每次修改后的代码都自动构架到hudson的目录下面，通过上面聊姐hudson的工作目录，这里以上图中红色区域（即到workspace目录）为根目录开始，将下面target目录中的edu-service-user.jar 和依赖的lib目录（jar包）自动化部署到远端。<br>remote directory：这里因为之前在provider的项目配置中配置过了根目录（/Home/Wusc），所以这里只需要在后面的目录中进行填写，填写希望部署的目录<br>Exec command：自动化部署的脚本。</p><p>自己看一下自动化部署的效果，将远程机器中（部署provider的机器）的jar包删除掉。<br>自己手动构建一次providr看一下效果==&gt;点击进入项目==&gt;点击左侧的立即构建，去部署provider的机器中查看jar包是否出现，并通过dubbo的图形工具，查看项目是否已经部署完成。</p><p>同理设置自动华部署web项目（client）<br><img alt="在这里插入图片描述" data-original="../images/2019031707542852--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>通过类似provider的方式自行测试client的自动化构建过程</p><p>测试项目自动化构建：<br>进入自己的项目中修改某处代码==&gt;点击项目右键team==&gt;更新==&gt;填写一点备注（比如”测试自动糊构建“）&gt;等待&gt;进入hudson查看是否正在自动构建（因为我们上面设置了每一分钟自动化构建一次，如果检测到代码变化的话。）</p><p>测试自己配置的如果依赖的父目录构建了的话，自己也会自动构建<br><img alt="在这里插入图片描述" data-original="../images/20190317080411147--x-oss-process=image-watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RhdGFpeWFuZ3U=,size_16,color_FFFFFF,t_70.png"><br>上图中的facede-user我们手动构建一次，之后service-user就自己开始构建了，这样就保证了自己依赖的项目永远是最新的。</p><h2 id="附录：两个脚本"><a href="#附录：两个脚本" class="headerlink" title="附录：两个脚本"></a><a href=""></a>附录：两个脚本</h2><p><a href="http://restart.sh" target="_blank" rel="noopener">restart.sh</a> (client脚本)<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## java env</span><br><span class="line"><span class="keyword">export</span> JAVA_HOME=<span class="regexp">/usr/</span>local/java/jdk1<span class="number">.7</span><span class="number">.0</span>_72</span><br><span class="line"><span class="keyword">export</span> JRE_HOME=$JAVA_HOME/jre</span><br><span class="line"></span><br><span class="line">## restart tomcat</span><br><span class="line">/home/wusc/edu/web/boss-tomcat/bin/shutdown.sh</span><br><span class="line">sleep <span class="number">3</span></span><br><span class="line">rm -rf /home/wusc/edu/web/boss-tomcat/webapps/edu-web-boss</span><br><span class="line">/home/wusc/edu/web/boss-tomcat/bin/startup.sh</span><br></pre></td></tr></table></figure><p></p><p><a href="http://service-user.sh" target="_blank" rel="noopener">service-user.sh</a>（provider脚本）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">## java env</span><br><span class="line"><span class="keyword">export</span> JAVA_HOME=<span class="regexp">/usr/</span>local/java/jdk1<span class="number">.7</span><span class="number">.0</span>_72</span><br><span class="line"><span class="keyword">export</span> JRE_HOME=$JAVA_HOME/jre</span><br><span class="line"></span><br><span class="line">## service name</span><br><span class="line">APP_NAME=user</span><br><span class="line"></span><br><span class="line">SERVICE_DIR=<span class="regexp">/home/</span>wusc/edu/service/$APP_NAME</span><br><span class="line">SERVICE_NAME=edu-service-$APP_NAME</span><br><span class="line">JAR_NAME=$SERVICE_NAME\.jar</span><br><span class="line">PID=$SERVICE_NAME\.pid</span><br><span class="line"></span><br><span class="line">cd $SERVICE_DIR</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">"$1"</span> <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">    start)</span><br><span class="line">        nohup $JRE_HOME/bin/java -Xms256m -Xmx512m -jar $JAR_NAME &gt;<span class="regexp">/dev/</span><span class="literal">null</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp;</span><br><span class="line">        echo $! &gt; $SERVICE_DIR/$PID</span><br><span class="line">        echo <span class="string">"=== start $SERVICE_NAME"</span></span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    stop)</span><br><span class="line">        kill <span class="string">`cat $SERVICE_DIR/$PID`</span></span><br><span class="line">        rm -rf $SERVICE_DIR/$PID</span><br><span class="line">        echo <span class="string">"=== stop $SERVICE_NAME"</span></span><br><span class="line"></span><br><span class="line">        sleep <span class="number">5</span></span><br><span class="line">        P_ID=<span class="string">`ps -ef | grep -w "$SERVICE_NAME" | grep -v "grep" | awk '&#123;print $2&#125;'`</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">"$P_ID"</span> == <span class="string">""</span> ]; then</span><br><span class="line">            echo <span class="string">"=== $SERVICE_NAME process not exists or stop success"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            echo <span class="string">"=== $SERVICE_NAME process pid is:$P_ID"</span></span><br><span class="line">            echo <span class="string">"=== begin kill $SERVICE_NAME process, pid is:$P_ID"</span></span><br><span class="line">            kill <span class="number">-9</span> $P_ID</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    restart)</span><br><span class="line">        $<span class="number">0</span> stop</span><br><span class="line">        sleep <span class="number">2</span></span><br><span class="line">        $<span class="number">0</span> start</span><br><span class="line">        echo <span class="string">"=== restart $SERVICE_NAME"</span></span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    *)</span><br><span class="line">        ## restart</span><br><span class="line">        $<span class="number">0</span> stop</span><br><span class="line">        sleep <span class="number">2</span></span><br><span class="line">        $<span class="number">0</span> start</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br><span class="line">exit <span class="number">0</span></span><br></pre></td></tr></table></figure></div><div><div><div style="text-align:center;color:#555;font-size:14px">-------------The End-------------</div></div></div><div><div class="my_post_copyright"><p><span>本文标题:</span><a href="/Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用.html">Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用</a></p><p><span>文章作者:</span><a href="/" title="访问 Leesin.Dong 的个人博客">Leesin.Dong</a></p><p><span>发布时间:</span>2019年03月16日 - 23:03</p><p><span>最后更新:</span>2019年03月17日 - 19:03</p><p><span>原始链接:</span><a href="/Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用.html" title="Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用">http://mmmmmm.me/Dubbo入门到精通学习笔记（六）：持续集成管理平台之Hudson 持续集成服务器的安装配置与使用.html</a></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>客官客官，不可以，你要对我负责～～～</div><button id="rewardButton" disable="enable"><script>window.onload=function(){var n=document.getElementById("QR"),e=document.getElementById("rewardButton");e.onclick=function(){"none"===n.style.display?n.style.display="block":n.style.display="none"}}</script><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" alt="Leesin.Dong 微信支付" data-original="/images/wechatpay.jpg"><p>微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" alt="Leesin.Dong 支付宝" data-original="/images/alipay.jpg"><p>支付宝</p></div></div></div></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019-03-13-2.html" rel="next" title="Dubbo入门到精通学习笔记（二）：Dubbo对传统工程进行改造"><i class="fa fa-chevron-left"></i> Dubbo入门到精通学习笔记（二）：Dubbo对传统工程进行改造</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></div></article><div class="post-spread"></div></div></div><div id="gitalk-container"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Leesin.Dong" data-original="/images/header.jpg"><p class="site-author-name" itemprop="name">Leesin.Dong</p><p class="site-description motion-element" itemprop="description">To be a better me</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">58</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">14</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">11</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/dataiyangu" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/dataiyangu" target="_blank" title="CSDN"><i class="fa fa-fw fa-copyright"></i>CSDN</a> </span><span class="links-of-author-item"><a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=32248827@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-E-Mail"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://mobile.twitter.com/dataiyangu" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i>Twitter</a> </span><span class="links-of-author-item"><a href="https://www.facebook.com/leesin.dong.923" target="_blank" title="FB Page"><i class="fa fa-fw fa-facebook"></i>FB Page</a> </span><span class="links-of-author-item"><a href="http://wpa.qq.com/msgrd?v=3&uin=32248827&site=hupaiyule&menu=yes" target="_blank" title="QQ"><i class="fa fa-fw fa-qq"></i>QQ</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> link</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://blog.csdn.net/dataiyangu" title="我的CSDN" target="_blank">我的CSDN</a></li><li class="links-of-blogroll-item"><a href="https://yelog.org" title="叶落阁" target="_blank">叶落阁</a></li><li class="links-of-blogroll-item"><a href="http://www.bianxiaofeng.com" title="边小丰" target="_blank">边小丰</a></li><li class="links-of-blogroll-item"><a href="https://qqdie.com" title="QQ爹" target="_blank">QQ爹</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#安装Hudson"><span class="nav-number">1.</span> <span class="nav-text">安装Hudson</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使用Hudson"><span class="nav-number">2.</span> <span class="nav-text">使用Hudson</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#tips：自动化部署"><span class="nav-number">2.1.</span> <span class="nav-text">tips：自动化部署</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#附录：两个脚本"><span class="nav-number">2.2.</span> <span class="nav-text">附录：两个脚本</span></a></li></ol></li></ol></div></div></section></div></aside></div><script>function password(){}var div=$(".post-body"),toc=$(".post-toc-wrap");password()</script></main></div><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2019</span> <span class="with-love" id="heart"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Leesin.Dong</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i>总访客 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人 </span><span class="site-pv"><i class="fa fa-eye"></i>访问量 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea");document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus();var o=document.execCommand("copy");document.body.removeChild(n),o?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})</script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css"><script src="/lib/algolia-instant-search/instantsearch.min.js"></script><script src="/js/src/algolia-search.js?v=5.1.4"></script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("6og9b7lpddMqazBCDe8z4HqL-gzGzoHsz","faKN7dalSdXLmYYJTRq98B1f")</script><script>function showTime(e){var t=new AV.Query(e),n=[],o=$(".leancloud_visitors");o.each(function(){n.push($(this).attr("id").trim())}),t.containedIn("url",n),t.find().done(function(e){var t=".leancloud-visitors-count";if(0===e.length)return void o.find(t).text(0);for(var i=0;i<e.length;i++){var r=e[i],s=r.get("url"),l=r.get("time"),c=document.getElementById(s);$(c).find(t).text(l)}for(var i=0;i<n.length;i++){var s=n[i],c=document.getElementById(s),u=$(c).find(t);""==u.text()&&u.text(0)}}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var r=new e,s=new AV.ACL;s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),r.setACL(s),r.set("title",o),r.set("url",n),r.set("time",1),r.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></body></html><script src="/js/src/pjax/lazyload_min.js"></script><script src="/js/src/pjax/comments/comments.gitalk.js"></script><script src="/js/src/pjax/require.js" defer async data-main="/js/src/pjax/main.js"></script><!-- rebuild by neat -->